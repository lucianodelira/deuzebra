<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Zebrinha – Caça-Níquel</title>
  <link rel="icon" type="image/png" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhD8ydFHUvoNrnZ19EcsyBjG5diG1coCqvw6XczPcGdUaTLEw9v6CDClvdhbg2JQVDXvGCRd_wjwj3t3ZY723fZRWllz4gbEn_mbHO7QCdtNC_6rj3rDVQdX3tQy9jvJYtB1lN9mv73QA5osnh9hlg4qPqkdd3JqI6S9XFSSRQbzxDOGg4-hlzKrtcH_4ad/s200/ChatGPT%20Image%201%20de%20jul.%20de%202025,%2000_34_37.png">
  <meta name="description" content="Jogo online divertido da Zebrinha – aposte, jogue e ganhe! Inspirado em caça-níqueis temáticos com personagens e ícones do futebol.">
  <meta name="keywords" content="zebrinha, jogo da zebrinha, caça-níquel, jogo online, aposta online, futebol, copa do brasil, slot game, jogo grátis, zebra game, apostas">
  <meta name="author" content="Zebrinha – Caça-Níquel">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="MPayment/Styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.7.0/css/flag-icon.min.css">
  <style>
    *{box-sizing:border-box}body{margin:0;padding:0;background:linear-gradient(#74d300,#179800);font-family:sans-serif;text-align:center}
    #app{max-width:480px;margin:10px auto;background:#152A3E;border-radius:5px;overflow:hidden;box-shadow:0 0 25px #000}
    .top-bar{display:flex;justify-content:space-between;background:#222;color:#fff;font-weight:bold;font-size:12px;padding:6px 10px}
    .top-bar span{background:#444;padding:3px 6px;border-radius:5px;color:yellow}
    #board{display:grid;grid-template-areas:"tl t1 t2 t3 t4 t5 t6 tr" "l1 btn btn btn btn btn btn r1" "l2 btn btn btn btn btn btn r2" "l3 btn btn btn btn btn btn r3" "l4 btn btn btn btn btn btn r4" "l5 btn btn btn btn btn btn r5" "bl b6 b5 b4 b3 b2 b1 br";gap:8px;margin-top:8px}
    .slot{background:white;border:2px solid #333;display:flex;justify-content:center;align-items:center;width:49px;height:49px}
    .center-image{grid-area:btn;display:flex;justify-content:center;align-items:center;background:black}
    .center-image img{width:100%;height:100%;object-fit:contain}
    #btnPlay{margin-top:10px;width:100%;height:40px;background:red;border:none;color:white;font-size:16px;font-weight:bold;cursor:pointer;border-radius:8px}
    #menu{background:#111;color:white;padding:8px}
    .flag-img{width:100%;height:100%;object-fit:contain}
    .blink{animation:brilho .2s infinite alternate,pulseBorder 1s infinite;box-shadow:0 0 20px 10px gold,0 0 40px 20px yellow;border:3px solid gold;z-index:10}
    @keyframes brilho{0%{box-shadow:0 0 10px 5px gold;border-color:gold}100%{box-shadow:0 0 25px 12px red;border-color:red}}
    @keyframes pulseBorder{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
    #betList{margin-top:8px;background:#222;color:#fff;padding:6px;border-radius:6px}
    #teamButtons{display:flex;flex-wrap:wrap;justify-content:center;gap:4px;margin-top:8px}
    .teamButton{width:45px;height:45px;border-radius:50%;border:1px solid #fff;background:#333;padding:0;cursor:pointer;overflow:hidden;transition:transform .2s}
    .teamButton img{width:100%;height:100%;object-fit:cover}
    .teamButton:hover{transform:scale(1.1)}
    .bet-item{display:inline-block;width:40px;margin:2px;background:#000;border:1px solid #fff;border-radius:4px;padding:2px;cursor:pointer}
    .bet-item:hover{border-color:red}
    #pixButton{margin-top:8px;width:100%;height:35px;background:#007BFF;border:1px solid #fff;color:white;font-size:14px;font-weight:bold;cursor:pointer;border-radius:6px;transition:transform .2s,background .3s}
    #pixButton:hover{transform:scale(1.05);background:#005FCC}
    #recargaPix{margin-top:12px;width:100%;height:40px;background-color:#00aa00;border:none;color:white;font-size:15px;font-weight:600;cursor:pointer;border-radius:8px}
    #recargaPix:hover{background-color:#008800}
    #alertBox{position:fixed;top:30%;left:50%;transform:translate(-50%,-50%);background:#111;color:white;padding:12px 24px;font-size:16px;font-weight:bold;border-radius:12px;border:2px solid;box-shadow:0 0 16px rgba(255,255,255,.2);z-index:999;animation:fadeAlert 2s ease-in-out}
    .hidden{display:none}
    @keyframes fadeAlert{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}10%{opacity:1;transform:translate(-50%,-50%) scale(1)}90%{opacity:1}100%{opacity:0;transform:translate(-50%,-50%) scale(.8)}}
    #btnTutorial{margin:10px auto;display:block;font-size:12px;padding:4px 10px;background:#179800;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:bold}
    #btnTutorial:hover{background:#127600}
  </style>
</head>
<body>
<div id="app">
  <div class="top-bar">
    <div>PRÊMIO: <span id="prize">0</span></div>
    <div>CRÉDITOS: <span id="credits">100</span></div>
  </div>
  <div id="board">
    <div class="slot" style="grid-area:tl"><img src="imagens/br.png" class="flag-img" data-team="br"></div>
    <div class="slot" style="grid-area:t1"><img src="imagens/de.png" class="flag-img" data-team="de"></div>
    <div class="slot" style="grid-area:t2"><img src="imagens/fr.png" class="flag-img" data-team="fr"></div>
    <div class="slot" style="grid-area:t3"><img src="imagens/es.png" class="flag-img" data-team="es"></div>
    <div class="slot" style="grid-area:t4"><img src="imagens/it.png" class="flag-img" data-team="it"></div>
    <div class="slot" style="grid-area:t5"><img src="imagens/t5.png" class="flag-img" data-team="t5"></div>
    <div class="slot" style="grid-area:t6"><img src="imagens/t6.png" class="flag-img" data-team="t6"></div>
    <div class="slot" style="grid-area:tr"><img src="imagens/pt.png" class="flag-img" data-team="pt"></div>
    <div class="slot" style="grid-area:l1"><img src="imagens/nl.png" class="flag-img" data-team="nl"></div>
    <div class="slot" style="grid-area:l2"><img src="imagens/gb.png" class="flag-img" data-team="gb"></div>
    <div class="slot" style="grid-area:l3"><img src="imagens/ar.png" class="flag-img" data-team="ar"></div>
    <div class="slot" style="grid-area:l4"><img src="imagens/l4.png" class="flag-img" data-team="l4"></div>
    <div class="slot" style="grid-area:l5"><img src="imagens/l5.png" class="flag-img" data-team="l5"></div>
    <div class="slot" style="grid-area:r1"><img src="imagens/mx.png" class="flag-img" data-team="mx"></div>
    <div class="slot" style="grid-area:r2"><img src="imagens/us.png" class="flag-img" data-team="us"></div>
    <div class="slot" style="grid-area:r3"><img src="imagens/co.png" class="flag-img" data-team="co"></div>
    <div class="slot" style="grid-area:r4"><img src="imagens/r4.png" class="flag-img" data-team="r4"></div>
    <div class="slot" style="grid-area:r5"><img src="imagens/r5.png" class="flag-img" data-team="r5"></div>
    <div class="slot" style="grid-area:bl"><img src="imagens/jp.png" class="flag-img" data-team="jp"></div>
    <div class="slot" style="grid-area:b6"><img src="imagens/b6.png" class="flag-img" data-team="b6"></div>
    <div class="slot" style="grid-area:b5"><img src="imagens/b5.png" class="flag-img" data-team="b5"></div>
    <div class="slot" style="grid-area:b4"><img src="imagens/kr.png" class="flag-img" data-team="kr"></div>
    <div class="slot" style="grid-area:b3"><img src="imagens/ch.png" class="flag-img" data-team="ch"></div>
    <div class="slot" style="grid-area:b2"><img src="imagens/uy.png" class="flag-img" data-team="uy"></div>
    <div class="slot" style="grid-area:b1"><img src="imagens/pe.png" class="flag-img" data-team="pe"></div>
    <div class="slot" style="grid-area:br"><img src="imagens/ca.png" class="flag-img" data-team="ca"></div>
    <div class="center-image">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi3wF6qqHM7gX9CCZ-ZID5NFP3uo_fkJkqUFdYfit90hxYh74RyWttbLSqL1O9nj14kyTVW55g2kmaaCn50wz6ioM9w0l4xQDD2vb4bWnx9pxzXTL46HqJxNAbMXy-etQskoRXcKtL-SIT369yln3iP-a3H-W3bisRv6uvVbJ_Ef_x1c5E3oT2QDGNDrSEZ/s1600/ChatGPT%20Image%201%20de%20jul.%20de%202025,%2000_56_33.png">
    </div>
  </div>
  <button id="btnPlay">JOGAR</button>
  <div id="menu">
    <button id="recargaPix" class="hidden">Recarga via Pix</button>
    <div id="alertBox" class="hidden"></div>
    <hr>
    <label>Escolher Time:</label>
    <div id="teamButtons">
      <button class="teamButton" data-team="br"><img src="imagens/br.png"></button>
      <button class="teamButton" data-team="de"><img src="imagens/de.png"></button>
      <button class="teamButton" data-team="fr"><img src="imagens/fr.png"></button>
      <button class="teamButton" data-team="es"><img src="imagens/es.png"></button>
      <button class="teamButton" data-team="it"><img src="imagens/it.png"></button>
      <button class="teamButton" data-team="pt"><img src="imagens/pt.png"></button>
      <button class="teamButton" data-team="nl"><img src="imagens/nl.png"></button>
      <button class="teamButton" data-team="gb"><img src="imagens/gb.png"></button>
      <button class="teamButton" data-team="ar"><img src="imagens/ar.png"></button>
      <button class="teamButton" data-team="mx"><img src="imagens/mx.png"></button>
      <button class="teamButton" data-team="us"><img src="imagens/us.png"></button>
      <button class="teamButton" data-team="co"><img src="imagens/co.png"></button>
      <button class="teamButton" data-team="jp"><img src="imagens/jp.png"></button>
      <button class="teamButton" data-team="kr"><img src="imagens/kr.png"></button>
      <button class="teamButton" data-team="ch"><img src="imagens/ch.png"></button>
      <button class="teamButton" data-team="uy"><img src="imagens/uy.png"></button>
      <button class="teamButton" data-team="pe"><img src="imagens/pe.png"></button>
      <button class="teamButton" data-team="ca"><img src="imagens/ca.png"></button>
      <button class="teamButton" data-team="t5"><img src="imagens/t5.png"></button>
      <button class="teamButton" data-team="t6"><img src="imagens/t6.png"></button>
      <button class="teamButton" data-team="l4"><img src="imagens/l4.png"></button>
      <button class="teamButton" data-team="l5"><img src="imagens/l5.png"></button>
      <button class="teamButton" data-team="r4"><img src="imagens/r4.png"></button>
      <button class="teamButton" data-team="r5"><img src="imagens/r5.png"></button>
      <button class="teamButton" data-team="b5"><img src="imagens/b5.png"></button>
      <button class="teamButton" data-team="b6"><img src="imagens/b6.png"></button>
    </div>
    <div id="betList"></div>
    <button id="pixButton" style="flex:1;">Sacar via Pix</button>
  </div>
  <audio id="backgroundSound" src="sons/background.mp3" loop></audio>
  <audio id="clickSound" src="sons/click.mp3"></audio>
  <audio id="spinSound" src="sons/spin.mp3"></audio>
  <audio id="winSound" src="sons/win.mp3"></audio>
  <audio id="loseSound" src="sons/lose.mp3"></audio>
</div>
<button id="btnTutorial" onclick="toggleTutorial()">Tutorial</button>
<div id="apresentacao" style="display:none; width:95%; margin:12px auto; padding:8px; background:#fff; border-radius:8px; box-shadow:0 0 6px rgba(0,0,0,.15);">
  <h2 style="color:#179800; font-size:14px;">Como Jogar</h2>
  <p><strong>1.</strong> Escolha até <strong>5 animais</strong>.</p>
  <p><strong>2.</strong> Aposte <strong>1 crédito</strong> em cada.</p>
  <p><strong>3.</strong> Jogue até 18 vezes → <strong>você ganha uma vez!</strong></p>
</div>

<script>
let credits = parseInt(localStorage.getItem('credits')) || 0;
let prize = parseInt(localStorage.getItem('prize')) || 0;
let totalDeposited = parseInt(localStorage.getItem('totalDeposited')) || 0;
let totalWon = parseInt(localStorage.getItem('totalWon')) || 0;
let gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
let hasWonOnce = localStorage.getItem('hasWonOnce') === 'true';
let winRound = parseInt(localStorage.getItem('winRound')) || null;
let bets = {};

const creditsEl = document.getElementById('credits');
const prizeEl = document.getElementById('prize');
const btnPlay = document.getElementById('btnPlay');
const slots = Array.from(document.querySelectorAll('.slot'));
const betList = document.getElementById('betList');
const teamButtons = document.querySelectorAll('.teamButton');
const pixButton = document.getElementById('pixButton');
const recargaBtn = document.getElementById('recargaPix');
const backgroundSound = document.getElementById('backgroundSound');
const clickSound = document.getElementById('clickSound');
const spinSound = document.getElementById('spinSound');
const winSound = document.getElementById('winSound');
const loseSound = document.getElementById('loseSound');

backgroundSound.volume = 0.4;
document.addEventListener('click', () => backgroundSound.play().catch(() => {}), { once: true });

function save() {
  localStorage.setItem('credits', credits);
  localStorage.setItem('prize', Math.max(0, prize));
  localStorage.setItem('totalDeposited', totalDeposited);
  localStorage.setItem('totalWon', totalWon);
  localStorage.setItem('gamesPlayed', gamesPlayed);
  localStorage.setItem('hasWonOnce', hasWonOnce);
  localStorage.setItem('winRound', winRound);
}

function addCredits(val) {
  if (!isNaN(val) && val > 0) {
    credits += val;
    totalDeposited += val;
    save();
    updateDisplay();
  }
}

function updateDisplay() {
  creditsEl.textContent = credits;
  prizeEl.textContent = Math.max(0, prize);
  betList.innerHTML = Object.entries(bets).map(([t, v]) => `
    <div class="bet-item" data-team="${t}">
      <img src="imagens/${t}.png" style="width:100%;height:24px;object-fit:contain;">
      <div style="color:yellow;font-size:10px;">${v}</div>
    </div>`).join('');
  document.querySelectorAll('.bet-item').forEach(i => i.onclick = () => removeBet(i.dataset.team));
  recargaBtn.classList.toggle('hidden', credits > 0);
}

function placeBet(team, val) {
  if (!team || val < 1 || val > 5) return;
  if (!bets[team] && Object.keys(bets).length >= 5) return alert('Escolha seu bicho e entre na jogada! 🦓');
  const total = (bets[team] || 0) + val;
  if (total > 5) return alert('Escolha seu bicho e entre na jogada! 🦓');
  if (credits < val) return alert('Ops, sem créditos! 😅 Que tal uma recarga via Pix para continuar a diversão?');
  bets[team] = total;
  credits -= val;
  clickSound.play().catch(() => {});
  save();
  updateDisplay();
}

function removeBet(team) {
  if (bets[team]) {
    bets[team]--;
    credits++;
    if (bets[team] === 0) delete bets[team];
    clickSound.play().catch(() => {});
    save();
    updateDisplay();
  }
}

teamButtons.forEach(b => b.onclick = () => placeBet(b.dataset.team, 1));

pixButton.onclick = () => {
  if (totalWon < 100) alert('Quase lá! Junte 100 créditos ganhos e libere seu saque! 💰');
  else alert('Saque liberado!');
};

function showAlert(m, c) {
  const a = document.getElementById('alertBox');
  a.textContent = m;
  a.style.borderColor = c;
  a.classList.remove('hidden');
  setTimeout(() => a.classList.add('hidden'), 2000);
}

btnPlay.onclick = () => {
  if (!Object.keys(bets).length) return alert('Escolha seu bicho e entre na jogada! 🦓');
  const hasOneCredit = Object.values(bets).some(v => v === 1);
  btnPlay.disabled = true;
  spinSound.play().catch(() => {});
  slots.forEach(s => s.classList.remove('blink'));

  let count = 0, flashes = 40 + Math.floor(Math.random() * 15);
  const safeSlots = slots.filter(s => !Object.keys(bets).includes(s.querySelector('img')?.dataset.team));
  const pool = safeSlots.length ? safeSlots : slots;
  let finalSlot;

  const interval = setInterval(() => {
    slots.forEach(s => s.classList.remove('blink'));
    const slot = pool[Math.floor(Math.random() * pool.length)];
    slot.classList.add('blink');
    finalSlot = slot;
    if (++count > flashes) {
      clearInterval(interval);
      if (hasOneCredit && totalDeposited > 0) {
        if (winRound === null && !hasWonOnce) {
          winRound = Math.floor(Math.random() * 18) + 1; // Sorteia na primeira jogada válida
          localStorage.setItem('winRound', winRound);
        }
        gamesPlayed++;
        localStorage.setItem('gamesPlayed', gamesPlayed);
      }

      let win = 0, winner = finalSlot.querySelector('img').dataset.team;

      if (!hasWonOnce && hasOneCredit && totalDeposited > 0 && gamesPlayed === winRound) {
        const eligible = Object.entries(bets).filter(([t, v]) => v === 1);
        if (eligible.length) {
          const [winTeam] = eligible[Math.floor(Math.random() * eligible.length)];
          const winSlot = slots.find(s => s.querySelector('img')?.dataset.team === winTeam);
          if (winSlot) {
            slots.forEach(s => s.classList.remove('blink'));
            winSlot.classList.add('blink');
            finalSlot = winSlot;
            winner = winTeam;
          }
          win = 25;
          totalWon += win;
          prize += win; // Só aumenta prize ao ganhar
          hasWonOnce = true;
          localStorage.setItem('hasWonOnce', 'true');
          localStorage.removeItem('winRound');
        }
      }

      credits += win;
      bets = {};
      save();
      updateDisplay();
      win ? (winSound.play().catch(() => {}), showAlert(`GANHOU ${win} CRÉDITOS!`, '#FFD700'))
          : (loseSound.play().catch(() => {}), showAlert('NÃO FOI DESSA VEZ', '#ff4444'));
      btnPlay.disabled = false;
    }
  }, 100);
};

updateDisplay();

document.getElementById('recargaPix').onclick = function () {
  if (!document.getElementById('pix-script-loader')) {
    const s = document.createElement('script');
    s.src = 'MPayment/Script.js';
    s.id = 'pix-script-loader';
    s.onload = () => openPaymentModal && openPaymentModal();
    document.body.appendChild(s);
  } else openPaymentModal && openPaymentModal();
};

function toggleTutorial() {
  const el = document.getElementById('apresentacao');
  el.style.display = el.style.display === 'none' ? 'block' : 'none';
}
</script>
<script src="MPayment/Modal.js"></script>
</body>
</html>
